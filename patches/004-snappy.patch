--- snappy-1.1.3/Makefile.am.orig	2013-10-15 14:41:48.000000000 +0400
+++ snappy-1.1.3/Makefile.am	2014-09-11 09:48:08.146000000 +0400
@@ -3,7 +3,7 @@
 # Library.
 lib_LTLIBRARIES = libsnappy.la
 libsnappy_la_SOURCES = snappy.cc snappy-sinksource.cc snappy-stubs-internal.cc snappy-c.cc
-libsnappy_la_LDFLAGS = -version-info $(SNAPPY_LTVERSION)
+libsnappy_la_LDFLAGS = -version-info $(SNAPPY_LTVERSION) -no-undefined
 
 include_HEADERS = snappy.h snappy-sinksource.h snappy-stubs-public.h snappy-c.h
 noinst_HEADERS = snappy-internal.h snappy-stubs-internal.h snappy-test.h
--- snappy-1.1.3/configure.ac.orig	2015-07-21 22:22:01.325936400 +0300
+++ snappy-1.1.3/configure.ac	2015-07-21 22:22:14.231674600 +0300
@@ -12,6 +12,7 @@
 
 # These are flags passed to automake (though they look like gcc flags!)
 AM_INIT_AUTOMAKE([-Wall])
+AM_PROG_AR
 
 LT_INIT
 AC_SUBST([LIBTOOL_DEPS])
